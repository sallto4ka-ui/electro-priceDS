<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–≠–ª–µ–∫—Ç—Ä–æ–ú–æ–Ω—Ç–∞–∂ –ü—Ä–æ 2025 | –£—Å–ª—É–≥–∏ —ç–ª–µ–∫—Ç—Ä–∏–∫–∞</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary: #2563eb;
            --primary-dark: #1e40af;
            --accent: #f59e0b;
            --dark: #0f172a;
            --light: #f8fafc;
            --white: #ffffff;
            --gray: #64748b;
            --border: #e2e8f0;
            --shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--light);
            color: var(--dark);
            line-height: 1.6;
            scroll-behavior: smooth;
        }

        header {
            position: fixed; top: 0; left: 0; width: 100%;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            z-index: 1000;
            border-bottom: 1px solid var(--border);
            padding: 15px 0;
        }

        /* === –ò–ó–ú–ï–ù–ï–ù–ò–ï 1: –£–≤–µ–ª–∏—á–∏–ª–∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É—é —à–∏—Ä–∏–Ω—É –¥–æ 1400px === */
        .container {
            max-width: 1400px; 
            margin: 0 auto;
            padding: 0 20px;
        }

        .nav-wrapper { display: flex; justify-content: space-between; align-items: center; }
        .logo { font-size: 24px; font-weight: 800; color: var(--dark); text-decoration: none; display: flex; align-items: center; gap: 10px; }
        .logo i { color: var(--accent); }
        .contact-btn { background: var(--primary); color: var(--white); padding: 10px 20px; border-radius: 50px; text-decoration: none; font-weight: 600; transition: 0.3s; }
        .contact-btn:hover { background: var(--primary-dark); box-shadow: 0 5px 15px rgba(37, 99, 235, 0.3); }

        .hero {
            margin-top: 80px;
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            color: var(--white);
            padding: 80px 0;
            text-align: center;
            border-radius: 0 0 50% 50% / 40px;
        }
        .hero h1 { font-size: 3rem; margin-bottom: 20px; line-height: 1.2; }
        .hero p { font-size: 1.2rem; color: #cbd5e1; margin-bottom: 30px; max-width: 600px; margin-left: auto; margin-right: auto; }
        .hero-span { color: var(--accent); }

        /* === –ò–ó–ú–ï–ù–ï–ù–ò–ï 2: –ü—Ä–æ–ø–æ—Ä—Ü–∏–∏ 1fr 1fr (50% –Ω–∞ 50%) === */
        .app-wrapper {
            display: grid;
            grid-template-columns: 1fr 1fr; /* –ü–æ—Ä–æ–≤–Ω—É */
            gap: 40px;
            margin-top: -40px;
            margin-bottom: 60px;
            position: relative;
        }

        /* LEFT SIDE */
        .services-panel { background: var(--white); border-radius: 20px; box-shadow: var(--shadow); padding: 30px; border: 1px solid var(--border); }
        
        .tabs { display: flex; gap: 10px; overflow-x: auto; padding-bottom: 15px; margin-bottom: 20px; border-bottom: 1px solid var(--border); scrollbar-width: none; }
        .tabs::-webkit-scrollbar { display: none; }
        .tab-btn { padding: 10px 20px; border-radius: 12px; background: var(--light); border: none; cursor: pointer; font-weight: 600; color: var(--gray); white-space: nowrap; transition: 0.2s; }
        .tab-btn.active { background: var(--primary); color: var(--white); }

        .service-group { margin-bottom: 30px; }
        .group-title { font-size: 1.2rem; margin-bottom: 15px; font-weight: 700; display: flex; align-items: center; gap: 10px; }
        .group-title i { color: var(--primary); }
        .service-item { display: flex; justify-content: space-between; align-items: center; padding: 15px 0; border-bottom: 1px dashed var(--border); }
        .service-item:last-child { border-bottom: none; }
        .item-info h4 { margin-bottom: 5px; font-size: 1rem; }
        .item-price { color: var(--primary); font-weight: 700; }
        .item-unit { color: var(--gray); font-size: 0.85rem; font-weight: 400; }

        .controls { display: flex; align-items: center; gap: 10px; background: var(--light); border-radius: 50px; padding: 5px; }
        .btn-qty { width: 30px; height: 30px; border-radius: 50%; border: none; background: var(--white); cursor: pointer; font-weight: bold; color: var(--primary); box-shadow: 0 2px 5px rgba(0,0,0,0.05); transition: 0.2s; }
        .btn-qty:hover { background: var(--primary); color: var(--white); }
        .qty-val { width: 30px; text-align: center; font-weight: 600; font-size: 14px; }
        .add-btn-text { padding: 5px 15px; font-size: 14px; font-weight: 600; color: var(--primary); cursor: pointer; }

        /* RIGHT SIDE (CART) */
        .cart-panel {
            position: sticky; top: 100px; height: fit-content;
            background: var(--white); border-radius: 20px; box-shadow: var(--shadow);
            padding: 30px; border: 1px solid var(--border);
        }
        .cart-header { font-size: 1.5rem; font-weight: 800; margin-bottom: 20px; border-bottom: 2px solid var(--light); padding-bottom: 15px; }
        
        .cart-list { max-height: 500px; overflow-y: auto; margin-bottom: 20px; }
        
        /* === –ò–ó–ú–ï–ù–ï–ù–ò–ï 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å—Ç—Ä–æ–∫–∏ –≤ –∫–æ—Ä–∑–∏–Ω–µ, —á—Ç–æ–±—ã –Ω–µ –ø–µ—Ä–µ–Ω–æ—Å–∏–ª–æ—Å—å === */
        .cart-list-item {
            display: flex;
            justify-content: space-between;
            align-items: center; /* –¶–µ–Ω—Ç—Ä–∏—Ä—É–µ–º –ø–æ –≤–µ—Ä—Ç–∏–∫–∞–ª–∏ */
            margin-bottom: 15px;
            font-size: 1rem;
            padding-bottom: 10px;
            border-bottom: 1px solid #f0f0f0;
            white-space: nowrap; /* –ó–∞–ø—Ä–µ—â–∞–µ–º –ø–µ—Ä–µ–Ω–æ—Å —Ç–µ–∫—Å—Ç–∞ */
            overflow: hidden;    /* –ï—Å–ª–∏ –≤—Å–µ –∂–µ –Ω–µ –≤–ª–µ–∑–µ—Ç - —Å–∫—Ä–æ–µ–º –ª–∏—à–Ω–µ–µ */
        }
        /* –õ–µ–≤–∞—è —á–∞—Å—Ç—å (–Ω–∞–∑–≤–∞–Ω–∏–µ) */
        .cart-item-name {
            white-space: normal; /* –†–∞–∑—Ä–µ—à–∞–µ–º –ø–µ—Ä–µ–Ω–æ—Å –≤–Ω—É—Ç—Ä–∏ –Ω–∞–∑–≤–∞–Ω–∏—è, –µ—Å–ª–∏ —Å–æ–≤—Å–µ–º –¥–ª–∏–Ω–Ω–æ–µ */
            margin-right: 15px;
            line-height: 1.2;
        }
        /* –ü—Ä–∞–≤–∞—è —á–∞—Å—Ç—å (—Ü–µ–Ω–∞) - —Ñ–∏–∫—Å–∏—Ä—É–µ–º —á—Ç–æ–±—ã –Ω–µ —Å–∫–∞–∫–∞–ª–∞ */
        .cart-item-price {
            white-space: nowrap;
            font-weight: bold;
            display: flex; 
            align-items: center;
            min-width: 100px; /* –†–µ–∑–µ—Ä–≤ –º–µ—Å—Ç–∞ –ø–æ–¥ —Ü–µ–Ω—É */
            justify-content: flex-end;
        }

        .del-btn { color: #ef4444; cursor: pointer; margin-left: 15px; font-size: 16px; }

        .total-block { background: var(--light); padding: 20px; border-radius: 15px; text-align: center; margin-bottom: 20px; }
        .total-price { font-size: 2.5rem; font-weight: 800; color: var(--dark); display: block; }
        .total-label { color: var(--gray); font-size: 0.9rem; }

        .input-group { margin-bottom: 15px; }
        .input-group label { display: block; font-size: 0.85rem; font-weight: 600; margin-bottom: 5px; color: var(--gray); }
        .form-input { width: 100%; padding: 12px; border-radius: 10px; border: 1px solid var(--border); font-family: inherit; outline: none; transition: 0.3s; }
        .form-input:focus { border-color: var(--primary); box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1); }

        .order-buttons { display: grid; gap: 10px; }
        .btn-order { width: 100%; padding: 15px; border: none; border-radius: 12px; font-weight: 700; font-size: 1rem; cursor: pointer; display: flex; justify-content: center; align-items: center; gap: 10px; transition: 0.3s; }
        .btn-whatsapp { background: #25D366; color: white; }
        .btn-whatsapp:hover { background: #20bd5a; }
        .btn-telegram { background: #2481cc; color: white; }
        .btn-telegram:hover { background: #1e70b3; }

        .empty-cart-msg { text-align: center; color: var(--gray); padding: 30px 0; }
        .empty-cart-msg i { font-size: 2rem; margin-bottom: 10px; opacity: 0.5; }

        /* ADAPTATION */
        @media (max-width: 1000px) { /* –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º—Å—è –Ω–∞ –∫–æ–ª–æ–Ω–∫—É —Ä–∞–Ω—å—à–µ, —Ç–∞–∫ –∫–∞–∫ —Å–µ—Ç–∫–∞ 50/50 */
            .hero h1 { font-size: 2rem; }
            .app-wrapper { grid-template-columns: 1fr; }
            .cart-panel { display: none; } 
            
            .mobile-cart-bar {
                position: fixed; bottom: 0; left: 0; width: 100%;
                background: var(--white); box-shadow: 0 -5px 20px rgba(0,0,0,0.1);
                padding: 15px 20px; display: flex; justify-content: space-between; align-items: center;
                z-index: 999; border-top: 1px solid var(--border);
            }
            .mob-total { font-weight: 800; font-size: 1.2rem; }
            .mob-btn { background: var(--dark); color: white; padding: 10px 25px; border-radius: 30px; text-decoration: none; font-weight: 600; }
        }
        @media (min-width: 1001px) { .mobile-cart-bar { display: none; } }

        /* Modal */
        .modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.5); backdrop-filter: blur(5px);
            z-index: 2000; display: none; justify-content: center; align-items: flex-end;
        }
        .modal-overlay.active { display: flex; }
        .modal-content {
            background: var(--white); width: 100%; max-width: 500px;
            border-radius: 20px 20px 0 0; padding: 30px; animation: slideUp 0.3s ease;
        }
        @keyframes slideUp { from { transform: translateY(100%); } to { transform: translateY(0); } }

    </style>
</head>
<body>

    <header>
        <div class="container nav-wrapper">
            <a href="#" class="logo"><i class="fa-solid fa-bolt"></i> –≠–ª–µ–∫—Ç—Ä–æ–ü—Ä–æ—Ñ–∏</a>
            <a href="tel:+79785754636" class="contact-btn"><i class="fa-solid fa-phone"></i> +7 (900) 000-00-00</a>
        </div>
    </header>

    <section class="hero">
        <div class="container">
            <h1>–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π —ç–ª–µ–∫—Ç—Ä–æ–º–æ–Ω—Ç–∞–∂ <br> <span class="hero-span">–ø–æ —á–µ—Å—Ç–Ω—ã–º —Ü–µ–Ω–∞–º</span></h1>
            <p>–†–∞—Å—Å—á–∏—Ç–∞–π—Ç–µ —Ç–æ—á–Ω—É—é —Å—Ç–æ–∏–º–æ—Å—Ç—å —Ä–∞–±–æ—Ç –æ–Ω–ª–∞–π–Ω –∑–∞ 2 –º–∏–Ω—É—Ç—ã. –ê–∫—Ç—É–∞–ª—å–Ω—ã–π –ø—Ä–∞–π—Å 2025 –≥–æ–¥–∞.</p>
        </div>
    </section>

    <div class="container">
        <div class="app-wrapper">
            
            <!-- SERVICES -->
            <div class="services-panel">
                <div class="tabs" id="category-tabs"></div>
                <div id="services-list"></div>
            </div>

            <!-- CART -->
            <div class="cart-panel">
                <div class="cart-header">–í–∞—à–∞ —Å–º–µ—Ç–∞</div>
                <div class="cart-list" id="cart-list-desktop">
                    <div class="empty-cart-msg">
                        <i class="fa-solid fa-basket-shopping"></i><br>
                        –í—ã–±–µ—Ä–∏—Ç–µ —É—Å–ª—É–≥–∏ —Å–ª–µ–≤–∞,<br>—á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å —Ä–∞—Å—á–µ—Ç
                    </div>
                </div>
                
                <div id="cart-actions" style="display:none;">
                    <div class="total-block">
                        <span class="total-label">–ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å:</span>
                        <span class="total-price" id="total-price-desktop">0 ‚ÇΩ</span>
                    </div>

                    <div class="input-group">
                        <label>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π (–ê–¥—Ä–µ—Å, –î–∞—Ç–∞):</label>
                        <textarea class="form-input" id="comment-desktop" rows="3" placeholder="–£–ª. –õ–µ–Ω–∏–Ω–∞ 5, –∑–∞–≤—Ç—Ä–∞ –≤ 10:00"></textarea>
                    </div>

                    <div class="order-buttons">
                        <button class="btn-order btn-whatsapp" onclick="sendOrder('wa')">
                            <i class="fa-brands fa-whatsapp"></i> –ó–∞–∫–∞–∑–∞—Ç—å –≤ WhatsApp
                        </button>
                        <button class="btn-order btn-telegram" onclick="sendOrder('tg')">
                            <i class="fa-brands fa-telegram"></i> –ó–∞–∫–∞–∑–∞—Ç—å –≤ Telegram
                        </button>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <!-- MOBILE BAR -->
    <div class="mobile-cart-bar" id="mobile-bar" style="display:none;">
        <div><div style="font-size: 12px; color: var(--gray);">–ò—Ç–æ–≥–æ:</div><div class="mob-total" id="mob-total-price">0 ‚ÇΩ</div></div>
        <a href="#" class="mob-btn" onclick="openModal()">–û—Ñ–æ—Ä–º–∏—Ç—å</a>
    </div>

    <!-- MODAL -->
    <div class="modal-overlay" id="modal">
        <div class="modal-content">
            <div style="display:flex; justify-content:space-between; margin-bottom:20px;">
                <h2 style="font-size:1.5rem;">–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ</h2>
                <div onclick="closeModal()" style="font-size:1.5rem; cursor:pointer;">&times;</div>
            </div>
            <div class="cart-list" id="cart-list-mobile" style="max-height: 200px; margin-bottom:20px;"></div>
            <div class="input-group">
                <label>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π:</label>
                <textarea class="form-input" id="comment-mobile" rows="2"></textarea>
            </div>
            <div class="order-buttons">
                <button class="btn-order btn-whatsapp" onclick="sendOrder('wa')"><i class="fa-brands fa-whatsapp"></i> WhatsApp</button>
                <button class="btn-order btn-telegram" onclick="sendOrder('tg')"><i class="fa-brands fa-telegram"></i> Telegram</button>
            </div>
        </div>
    </div>

<script>
    // === –ë–ê–ó–ê –î–ê–ù–ù–´–• ===
    const services = [
        {
            id: "finish", title: "–ß–∏—Å—Ç–æ–≤–∞—è —ç–ª–µ–∫—Ç—Ä–∏–∫–∞", icon: "fa-plug",
            items: [
                { id: 1, name: "–£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ä–æ–∑–µ—Ç–∫–∏ / –≤—ã–∫–ª—é—á–∞—Ç–µ–ª—è (–≤ –ø–æ–¥—Ä–æ–∑–µ—Ç–Ω–∏–∫)", price: 350, unit: "—à—Ç" },
                { id: 2, name: "–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞–∫–ª–∞–¥–Ω–æ–π —Ä–æ–∑–µ—Ç–∫–∏ (–æ—Ç–∫—Ä—ã—Ç–∞—è)", price: 450, unit: "—à—Ç" },
                { id: 3, name: "–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –≤–∞—Ä–æ—á–Ω–æ–π –ø–∞–Ω–µ–ª–∏ (1—Ñ/3—Ñ)", price: 1200, unit: "—à—Ç" },
                { id: 4, name: "–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –¥—É—Ö. —à–∫–∞—Ñ–∞", price: 1000, unit: "—à—Ç" },
                { id: 5, name: "–£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–∏–ª–æ–≤–æ–π —Ä–æ–∑–µ—Ç–∫–∏ 380–í (3 —Ñ–∞–∑—ã)", price: 1500, unit: "—à—Ç" },
                { id: 6, name: "–ú–æ–Ω—Ç–∞–∂ —Ç–µ—Ä–º–æ—Ä–µ–≥—É–ª—è—Ç–æ—Ä–∞ —Ç–µ–ø–ª–æ–≥–æ –ø–æ–ª–∞", price: 600, unit: "—à—Ç" }
            ]
        },
        {
            id: "light", title: "–û—Å–≤–µ—â–µ–Ω–∏–µ & LED", icon: "fa-lightbulb",
            items: [
                { id: 10, name: "–ú–æ–Ω—Ç–∞–∂ –ª—é—Å—Ç—Ä—ã (–∫—Ä—é–∫/–ø–ª–∞–Ω–∫–∞)", price: 1500, unit: "—à—Ç" },
                { id: 11, name: "–°–≤–µ—Ç–∏–ª—å–Ω–∏–∫ '–ê—Ä–º—Å—Ç—Ä–æ–Ω–≥' / –û—Ñ–∏—Å–Ω—ã–π", price: 500, unit: "—à—Ç" },
                { id: 12, name: "–¢–æ—á–µ—á–Ω—ã–π —Å–≤–µ—Ç–∏–ª—å–Ω–∏–∫ (–≤—Ä–µ–∑–∫–∞+–ø–æ–¥–∫–ª.)", price: 450, unit: "—à—Ç" },
                { id: 13, name: "LED –ª–µ–Ω—Ç–∞ (–º–æ–Ω—Ç–∞–∂ –≤ –ø—Ä–æ—Ñ–∏–ª—å)", price: 450, unit: "–º" },
                { id: 14, name: "LED –ª–µ–Ω—Ç–∞ (–Ω–∞–∫–ª–µ–π–∫–∞)", price: 300, unit: "–º" },
                { id: 15, name: "–ú–æ–Ω—Ç–∞–∂ –±–ª–æ–∫–∞ –ø–∏—Ç–∞–Ω–∏—è / –¥—Ä–∞–π–≤–µ—Ä–∞", price: 800, unit: "—à—Ç" }
            ]
        },
        {
            id: "diag", title: "–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞", icon: "fa-bolt",
            items: [
                { id: 20, name: "–ü–æ–∏—Å–∫ –Ω–µ–∏—Å–ø—Ä–∞–≤–Ω–æ—Å—Ç–∏ (–º–∏–Ω. –≤—ã–µ–∑–¥)", price: 3000, unit: "—É—Å–ª." },
                { id: 21, name: "–†–µ–º–æ–Ω—Ç –æ–±—Ä—ã–≤–∞ –≤ —Å—Ç–µ–Ω–µ (–±–µ–∑ –æ—Ç–¥–µ–ª–∫–∏)", price: 1500, unit: "—Ç–æ—á–∫–∞" },
                { id: 22, name: "–ü–µ—Ä–µ–±–æ—Ä–∫–∞ —Ä–∞—Å–ø–∞–µ—á–Ω–æ–π –∫–æ—Ä–æ–±–∫–∏", price: 1200, unit: "—à—Ç" }
            ]
        },
        {
            id: "rough", title: "–ß–µ—Ä–Ω–æ–≤—ã–µ —Ä–∞–±–æ—Ç—ã", icon: "fa-hammer",
            items: [
                { id: 30, name: "–®—Ç—Ä–æ–±–ª–µ–Ω–∏–µ (–±–µ—Ç–æ–Ω)", price: 600, unit: "–º" },
                { id: 31, name: "–®—Ç—Ä–æ–±–ª–µ–Ω–∏–µ (–∫–∏—Ä–ø–∏—á/–±–ª–æ–∫)", price: 400, unit: "–º" },
                { id: 32, name: "–í–º–∞–∑–∫–∞ –ø–æ–¥—Ä–æ–∑–µ—Ç–Ω–∏–∫–∞", price: 350, unit: "—à—Ç" },
                { id: 33, name: "–ü—Ä–æ–∫–ª–∞–¥–∫–∞ –∫–∞–±–µ–ª—è (–≤ –≥–æ—Ñ—Ä–µ)", price: 150, unit: "–º" }
            ]
        },
        {
            id: "shield", title: "–©–∏—Ç –∏ –ê–≤—Ç–æ–º–∞—Ç–∏–∫–∞", icon: "fa-server",
            items: [
                { id: 40, name: "–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∞ 1–ü", price: 350, unit: "—à—Ç" },
                { id: 41, name: "–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –£–ó–û / –î–∏—Ñ.–∞–≤—Ç–æ–º–∞—Ç–∞", price: 600, unit: "—à—Ç" },
                { id: 42, name: "–ö—Ä–æ—Å—Å-–º–æ–¥—É–ª—å / –®–∏–Ω—ã", price: 800, unit: "—à—Ç" },
                { id: 43, name: "–ú–æ–Ω—Ç–∞–∂ —Å—á–µ—Ç—á–∏–∫–∞", price: 1500, unit: "—à—Ç" }
            ]
        }
    ];

    let cart = {};

    function init() {
        const tabsContainer = document.getElementById('category-tabs');
        const listContainer = document.getElementById('services-list');

        services.forEach((cat, index) => {
            // Tabs
            const tabBtn = document.createElement('button');
            tabBtn.className = `tab-btn ${index === 0 ? 'active' : ''}`;
            tabBtn.innerHTML = `<i class="fa-solid ${cat.icon}"></i> ${cat.title}`;
            tabBtn.onclick = () => {
                document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
                tabBtn.classList.add('active');
                document.getElementById(`group-${cat.id}`).scrollIntoView({ behavior: 'smooth', block: 'center' });
            };
            tabsContainer.appendChild(tabBtn);

            // Groups
            const group = document.createElement('div');
            group.className = 'service-group';
            group.id = `group-${cat.id}`;
            let groupHtml = `<div class="group-title"><i class="fa-solid ${cat.icon}"></i> ${cat.title}</div>`;
            
            cat.items.forEach(item => {
                groupHtml += `
                <div class="service-item">
                    <div class="item-info">
                        <h4>${item.name}</h4>
                        <span class="item-price">${item.price} ‚ÇΩ</span> <span class="item-unit">/ ${item.unit}</span>
                    </div>
                    <div id="controls-${item.id}">
                        <div class="controls"><div class="add-btn-text" onclick="updateCart(${item.id}, 1)">–î–æ–±–∞–≤–∏—Ç—å</div></div>
                    </div>
                </div>`;
            });
            
            group.innerHTML = groupHtml;
            listContainer.appendChild(group);
        });
    }

    function updateCart(id, delta) {
        if (!cart[id]) cart[id] = 0;
        cart[id] += delta;
        if (cart[id] <= 0) delete cart[id];
        renderControls(id);
        renderCart();
    }

    function renderControls(id) {
        const el = document.getElementById(`controls-${id}`);
        if (!el) return;
        const qty = cart[id] || 0;
        if (qty === 0) {
            el.innerHTML = `<div class="controls"><div class="add-btn-text" onclick="updateCart(${id}, 1)">–î–æ–±–∞–≤–∏—Ç—å</div></div>`;
        } else {
            el.innerHTML = `<div class="controls"><button class="btn-qty" onclick="updateCart(${id}, -1)">-</button><span class="qty-val">${qty}</span><button class="btn-qty" onclick="updateCart(${id}, 1)">+</button></div>`;
        }
    }

    function renderCart() {
        const cartListD = document.getElementById('cart-list-desktop');
        const cartActionsD = document.getElementById('cart-actions');
        const totalD = document.getElementById('total-price-desktop');
        
        const mobileBar = document.getElementById('mobile-bar');
        const mobTotal = document.getElementById('mob-total-price');
        const cartListM = document.getElementById('cart-list-mobile');

        let html = '';
        let total = 0;
        let hasItems = false;

        services.forEach(cat => {
            cat.items.forEach(item => {
                if (cart[item.id]) {
                    hasItems = true;
                    const sum = cart[item.id] * item.price;
                    total += sum;
                    // –û–ë–ù–û–í–õ–ï–ù–ù–ê–Ø –í–ï–†–°–¢–ö–ê –°–¢–†–û–ö–ò –ö–û–†–ó–ò–ù–´
                    html += `
                        <div class="cart-list-item">
                            <div class="cart-item-name">
                                ${item.name} <br> 
                                <small style="color:#888; font-weight:normal;">${cart[item.id]} ${item.unit} x ${item.price} ‚ÇΩ</small>
                            </div>
                            <div class="cart-item-price">
                                ${sum} ‚ÇΩ 
                                <i class="fa-solid fa-trash del-btn" onclick="updateCart(${item.id}, -${cart[item.id]})"></i>
                            </div>
                        </div>`;
                }
            });
        });

        if (hasItems) {
            cartListD.innerHTML = html;
            cartActionsD.style.display = 'block';
            totalD.innerText = total.toLocaleString() + ' ‚ÇΩ';
            
            // Mobile
            mobileBar.style.display = 'flex';
            mobTotal.innerText = total.toLocaleString() + ' ‚ÇΩ';
            cartListM.innerHTML = html;
        } else {
            cartListD.innerHTML = `<div class="empty-cart-msg"><i class="fa-solid fa-basket-shopping"></i><br>–°–º–µ—Ç–∞ –ø—É—Å—Ç–∞</div>`;
            cartActionsD.style.display = 'none';
            mobileBar.style.display = 'none';
            closeModal();
        }
    }

    function sendOrder(type) {
        let comment = "";
        if (window.innerWidth <= 1000) {
            comment = document.getElementById('comment-mobile').value;
        } else {
            comment = document.getElementById('comment-desktop').value;
        }

        let msg = "–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! –•–æ—á—É –∑–∞–∫–∞–∑–∞—Ç—å —Ä–∞–±–æ—Ç—ã :\n\n";
        let total = 0;

        services.forEach(cat => {
            cat.items.forEach(item => {
                if (cart[item.id]) {
                    const sum = cart[item.id] * item.price;
                    total += sum;
                    msg += `üîπ ${item.name}: ${cart[item.id]} ${item.unit} (${sum}‚ÇΩ)\n`;
                }
            });
        });

        msg += `\nüí∞ –ò–¢–û–ì–û: ${total.toLocaleString()} —Ä—É–±.`;
        if (comment) msg += `\n\nüìù –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: ${comment}`;

        const phone = "+79785754636"; 
        const tgUsername = "Llosta"; 

        let url = "";
        if (type === 'wa') {
            url = `https://wa.me/${phone}?text=${encodeURIComponent(msg)}`;
        } else if (type === 'tg') {
            url = `https://t.me/${tgUsername}?text=${encodeURIComponent(msg)}`;
        }

        window.open(url, '_blank');
    }

    function openModal() {
        document.getElementById('modal').classList.add('active');
        document.body.style.overflow = 'hidden'; 
    }
    function closeModal() {
        document.getElementById('modal').classList.remove('active');
        document.body.style.overflow = 'auto';
    }
    document.getElementById('modal').onclick = function(e) {
        if (e.target === this) closeModal();
    }

    init();

</script>

</body>
</html>