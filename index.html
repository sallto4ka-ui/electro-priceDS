<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–≠–ª–µ–∫—Ç—Ä–æ–ú–æ–Ω—Ç–∞–∂ –ü—Ä–æ 2025</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary: #2563eb;
            --primary-dark: #1e40af;
            --accent: #f59e0b;
            --dark: #0f172a;
            --light: #f8fafc;
            --white: #ffffff;
            --gray: #64748b;
            --border: #e2e8f0;
            --shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }

        * { box-sizing: border-box; margin: 0; padding: 0; -webkit-tap-highlight-color: transparent; }
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--light);
            color: var(--dark);
            line-height: 1.5;
            scroll-behavior: smooth;
            padding-bottom: 80px; /* –ú–µ—Å—Ç–æ –ø–æ–¥ –Ω–∏–∂–Ω—é—é –ø–∞–Ω–µ–ª—å –Ω–∞ –º–æ–±–∏–ª—å–Ω–æ–º */
        }

        /* === HEADER === */
        header {
            position: fixed; top: 0; left: 0; width: 100%;
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(10px);
            z-index: 1000;
            border-bottom: 1px solid var(--border);
            padding: 12px 0;
            transition: 0.3s;
        }
        .container { max-width: 1200px; margin: 0 auto; padding: 0 20px; }
        .nav-wrapper { display: flex; justify-content: space-between; align-items: center; }
        .logo { font-size: 20px; font-weight: 800; color: var(--dark); text-decoration: none; display: flex; align-items: center; gap: 8px; }
        .logo i { color: var(--accent); }
        .contact-btn { background: var(--primary); color: var(--white); padding: 8px 16px; border-radius: 50px; text-decoration: none; font-weight: 600; font-size: 0.9rem; transition: 0.3s; }
        
        /* === HERO === */
        .hero {
            margin-top: 65px;
            background: linear-gradient(rgba(15, 23, 42, 0.8), rgba(15, 23, 42, 0.8)), 
                        url('https://images.unsplash.com/photo-1621905251189-08b45d6a269e?q=80&w=1200');
            background-size: cover; background-position: center;
            color: var(--white);
            padding: 60px 0;
            text-align: center;
            border-radius: 0 0 30px 30px;
            margin-bottom: 30px;
        }
        .hero h1 { font-size: 2.2rem; margin-bottom: 15px; line-height: 1.1; }
        .hero p { font-size: 1rem; color: #cbd5e1; max-width: 600px; margin: 0 auto; }
        .hero-span { color: var(--accent); }

        /* === LAYOUT === */
        .app-wrapper {
            display: grid;
            grid-template-columns: 1fr 1fr; /* –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é 2 –∫–æ–ª–æ–Ω–∫–∏ (–ü–ö) */
            gap: 30px;
            margin-bottom: 60px;
        }

        /* === SERVICES LIST (LEFT) === */
        .services-panel { background: var(--white); border-radius: 20px; box-shadow: var(--shadow); padding: 20px; border: 1px solid var(--border); }
        
        /* TABS (Sticky styling handled in media queries) */
        .tabs { 
            display: flex; gap: 10px; overflow-x: auto; padding-bottom: 10px; margin-bottom: 15px; 
            border-bottom: 1px solid var(--border); scrollbar-width: none; 
        }
        .tabs::-webkit-scrollbar { display: none; }
        
        .tab-btn { 
            padding: 8px 16px; border-radius: 20px; background: var(--light); border: none; 
            cursor: pointer; font-weight: 600; color: var(--gray); white-space: nowrap; 
            font-size: 0.9rem; transition: 0.2s; 
        }
        .tab-btn.active { background: var(--primary); color: var(--white); transform: scale(1.05); }

        .service-group { margin-bottom: 25px; scroll-margin-top: 130px; }
        .group-title { font-size: 1.1rem; font-weight: 700; margin-bottom: 10px; color: var(--dark); padding-left: 5px; }
        
        .service-item { 
            display: flex; justify-content: space-between; align-items: center; 
            padding: 12px 0; border-bottom: 1px dashed var(--border); 
        }
        .service-item:last-child { border-bottom: none; }
        
        .item-info { padding-right: 10px; }
        .item-info h4 { margin: 0 0 4px 0; font-size: 0.95rem; line-height: 1.2; }
        .item-price { color: var(--primary); font-weight: 700; font-size: 0.9rem; }
        .item-unit { font-size: 0.8rem; color: #999; font-weight: normal; }

        /* Controls */
        .controls { display: flex; align-items: center; gap: 8px; background: var(--light); border-radius: 12px; padding: 4px; }
        .btn-qty { 
            width: 32px; height: 32px; border-radius: 8px; border: none; background: var(--white); 
            cursor: pointer; font-weight: bold; color: var(--primary); box-shadow: 0 2px 4px rgba(0,0,0,0.05); 
            font-size: 1.2rem; display: flex; align-items: center; justify-content: center;
        }
        .btn-qty:active { background: #eee; transform: scale(0.95); }
        .qty-val { width: 24px; text-align: center; font-weight: 600; font-size: 0.95rem; }
        .add-btn-text { padding: 6px 12px; font-size: 0.85rem; font-weight: 600; color: var(--primary); cursor: pointer; }

        /* === CART PANEL (DESKTOP) === */
        .cart-panel { 
            position: sticky; top: 90px; height: fit-content; 
            background: var(--white); border-radius: 20px; box-shadow: var(--shadow); 
            padding: 25px; border: 1px solid var(--border); 
        }
        .cart-header { font-size: 1.3rem; font-weight: 800; margin-bottom: 15px; border-bottom: 2px solid var(--light); padding-bottom: 10px; }
        .cart-list { max-height: 400px; overflow-y: auto; margin-bottom: 20px; }
        .cart-list-item { display: flex; justify-content: space-between; margin-bottom: 12px; font-size: 0.9rem; border-bottom: 1px solid #f0f0f0; padding-bottom: 8px; }
        .del-btn { color: #ff4757; cursor: pointer; margin-left: 10px; }
        
        .total-block { background: var(--light); padding: 15px; border-radius: 12px; text-align: center; margin-bottom: 15px; }
        .total-price { font-size: 2rem; font-weight: 800; color: var(--dark); display: block; }
        
        .form-input { 
            width: 100%; padding: 12px; border-radius: 10px; border: 1px solid var(--border); 
            outline: none; margin-bottom: 10px; font-family: inherit; font-size: 16px; 
        }
        .btn-order { 
            width: 100%; padding: 14px; border: none; border-radius: 12px; font-weight: 700; 
            cursor: pointer; display: flex; justify-content: center; gap: 8px; font-size: 1rem; margin-bottom: 8px;
        }
        .btn-whatsapp { background: #25D366; color: white; }
        .btn-telegram { background: #2481cc; color: white; }
        .empty-msg { text-align: center; color: #999; padding: 30px 0; }

        /* === MOBILE BOTTOM BAR === */
        .mobile-cart-bar {
            position: fixed; bottom: 0; left: 0; width: 100%;
            background: var(--white); 
            box-shadow: 0 -5px 20px rgba(0,0,0,0.1);
            padding: 15px 20px; 
            display: none; /* –°–∫—Ä—ã—Ç–æ –Ω–∞ –ü–ö */
            justify-content: space-between; align-items: center;
            z-index: 2000; border-top: 1px solid var(--border);
            padding-bottom: max(15px, env(safe-area-inset-bottom));
        }
        .mob-info { font-size: 0.8rem; color: #888; }
        .mob-total { font-weight: 800; font-size: 1.2rem; color: var(--dark); }
        .mob-btn { 
            background: var(--dark); color: white; 
            padding: 10px 25px; border-radius: 30px; 
            text-decoration: none; font-weight: 600; cursor: pointer;
        }

        /* === MOBILE MODAL (BOTTOM SHEET) === */
        .modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.5); backdrop-filter: blur(3px);
            z-index: 3000; display: none; justify-content: center; align-items: flex-end;
        }
        .modal-overlay.active { display: flex; animation: fadeIn 0.2s; }
        .modal-content {
            background: var(--white); width: 100%; max-width: 600px;
            border-radius: 25px 25px 0 0; padding: 25px; 
            max-height: 85vh; overflow-y: auto;
            animation: slideUp 0.3s cubic-bezier(0.16, 1, 0.3, 1);
            padding-bottom: max(25px, env(safe-area-inset-bottom));
        }
        @keyframes slideUp { from { transform: translateY(100%); } to { transform: translateY(0); } }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        /* === –ê–î–ê–ü–¢–ê–¶–ò–Ø –ü–û–î –ú–û–ë–ò–õ–¨–ù–´–ï (MEDIA QUERIES) === */
        @media (max-width: 900px) {
            /* –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º —Å–µ—Ç–∫—É –≤ 1 –∫–æ–ª–æ–Ω–∫—É */
            .app-wrapper { grid-template-columns: 1fr; gap: 0; }
            
            /* –°–∫—Ä—ã–≤–∞–µ–º –ü–ö –∫–æ—Ä–∑–∏–Ω—É */
            .cart-panel { display: none; }
            
            /* –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –º–æ–±–∏–ª—å–Ω—É—é –ø–ª–∞—à–∫—É */
            .mobile-cart-bar { display: flex; }

            /* –ê–¥–∞–ø—Ç–∞—Ü–∏—è Hero */
            .hero { margin-top: 55px; padding: 40px 0; border-radius: 0 0 20px 20px; }
            .hero h1 { font-size: 1.8rem; }
            .hero p { font-size: 0.95rem; padding: 0 10px; }

            /* –õ–∏–ø–∫–∏–µ —Ç–∞–±—ã –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö */
            .tabs {
                position: sticky; top: 60px; /* –í—ã—Å–æ—Ç–∞ —Ö–µ–¥–µ—Ä–∞ */
                background: var(--white); z-index: 90;
                padding: 10px 0; margin: 0 -20px 20px -20px; /* –†–∞—Å—Ç—è–≥–∏–≤–∞–µ–º –Ω–∞ –≤—Å—é —à–∏—Ä–∏–Ω—É */
                padding-left: 20px; box-shadow: 0 4px 10px rgba(0,0,0,0.03);
            }
            
            /* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å–ø–∏—Å–∫–∞ */
            .services-panel { border: none; box-shadow: none; padding: 0; border-radius: 0; background: transparent; }
            
            .service-item { padding: 15px 0; }
            .btn-qty { width: 36px; height: 36px; } /* –ö–Ω–æ–ø–∫–∏ –∫—Ä—É–ø–Ω–µ–µ –¥–ª—è –ø–∞–ª—å—Ü–µ–≤ */
            
            /* –•–µ–¥–µ—Ä –ø–æ–º–µ–Ω—å—à–µ */
            header { padding: 10px 0; }
            .contact-btn { padding: 6px 12px; font-size: 0.8rem; }
            .contact-btn i { display: none; } /* –¢–æ–ª—å–∫–æ –Ω–æ–º–µ—Ä, –±–µ–∑ –∏–∫–æ–Ω–∫–∏ */
        }
    </style>
</head>
<body>

    <header>
        <div class="container nav-wrapper">
            <a href="#" class="logo"><i class="fa-solid fa-bolt"></i> –≠–ª–µ–∫—Ç—Ä–æ–ü—Ä–æ—Ñ–∏</a>
            <!-- –í–ê–® –¢–ï–õ–ï–§–û–ù -->
            <a href="tel:+79785754636" class="contact-btn"><i class="fa-solid fa-phone"></i> +7 (978) 575-46-36</a>
        </div>
    </header>

    <section class="hero">
        <div class="container">
            <h1>–£—Å–ª—É–≥–∏ —ç–ª–µ–∫—Ç—Ä–∏–∫–∞ <br><span class="hero-span">–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ</span></h1>
            <p>–û–Ω–ª–∞–π–Ω-–∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Å—Ç–æ–∏–º–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç. –ü—Ä–∞–π—Å 2025.</p>
        </div>
    </section>

    <div class="container">
        <!-- –û–±–µ—Ä—Ç–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è -->
        <div class="app-wrapper">
            
            <!-- –õ–µ–≤–∞—è —á–∞—Å—Ç—å: –°–ø–∏—Å–æ–∫ —É—Å–ª—É–≥ -->
            <div class="services-panel">
                <div class="tabs" id="category-tabs"></div>
                <div id="services-list"></div>
            </div>

            <!-- –ü—Ä–∞–≤–∞—è —á–∞—Å—Ç—å: –ö–æ—Ä–∑–∏–Ω–∞ (–¢–æ–ª—å–∫–æ –¥–ª—è –ü–ö) -->
            <div class="cart-panel">
                <div class="cart-header">–í–∞—à–∞ —Å–º–µ—Ç–∞</div>
                <div class="cart-list" id="cart-list-desktop">
                    <div class="empty-msg">–°–º–µ—Ç–∞ –ø—É—Å—Ç–∞</div>
                </div>
                <div id="cart-actions-desktop" style="display:none;">
                    <div class="total-block">
                        <small>–ò—Ç–æ–≥–æ:</small>
                        <span class="total-price" id="total-price-desktop">0 ‚ÇΩ</span>
                    </div>
                    <input type="text" class="form-input" id="comment-desktop" placeholder="–ê–¥—Ä–µ—Å / –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π...">
                    <button class="btn-order btn-whatsapp" onclick="sendOrder('wa')">
                        <i class="fa-brands fa-whatsapp"></i> –ó–∞–∫–∞–∑–∞—Ç—å –≤ WhatsApp
                    </button>
                    <button class="btn-order btn-telegram" onclick="sendOrder('tg')">
                        <i class="fa-brands fa-telegram"></i> –ó–∞–∫–∞–∑–∞—Ç—å –≤ Telegram
                    </button>
                </div>
            </div>

        </div>
    </div>

    <!-- –ú–û–ë–ò–õ–¨–ù–ê–Ø –ù–ò–ñ–ù–Ø–Ø –ü–ê–ù–ï–õ–¨ -->
    <div class="mobile-cart-bar" id="mobile-bar">
        <div>
            <div class="mob-info">–ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å:</div>
            <div class="mob-total" id="mob-total-price">0 ‚ÇΩ</div>
        </div>
        <div class="mob-btn" onclick="openModal()">–û—Ñ–æ—Ä–º–∏—Ç—å</div>
    </div>

    <!-- –ú–û–ë–ò–õ–¨–ù–ê–Ø –®–¢–û–†–ö–ê (MODAL) -->
    <div class="modal-overlay" id="modal">
        <div class="modal-content">
            <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:20px;">
                <h2 style="margin:0; font-size:1.5rem;">–í–∞—à –∑–∞–∫–∞–∑</h2>
                <div onclick="closeModal()" style="font-size:1.8rem; color:#999; cursor:pointer;">&times;</div>
            </div>
            
            <div class="cart-list" id="cart-list-mobile" style="margin-bottom:20px;"></div>
            
            <div class="total-block" style="background:var(--light); padding:15px; border-radius:12px; margin-bottom:20px;">
                <div style="font-size:1.5rem; font-weight:800;" id="modal-total-price">0 ‚ÇΩ</div>
            </div>

            <input type="text" class="form-input" id="comment-mobile" placeholder="–ê–¥—Ä–µ—Å / –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π...">
            
            <button class="btn-order btn-whatsapp" onclick="sendOrder('wa')">
                <i class="fa-brands fa-whatsapp"></i> WhatsApp
            </button>
            <button class="btn-order btn-telegram" onclick="sendOrder('tg')">
                <i class="fa-brands fa-telegram"></i> Telegram
            </button>
        </div>
    </div>

<script>
    // === –î–ê–ù–ù–´–ï –£–°–õ–£–ì ===
    const services = [
        {
            id: "finish", title: "–ß–∏—Å—Ç–æ–≤–∞—è —ç–ª–µ–∫—Ç—Ä–∏–∫–∞", icon: "fa-plug",
            items: [
                { id: 1, name: "–£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ä–æ–∑–µ—Ç–∫–∏ / –≤—ã–∫–ª—é—á–∞—Ç–µ–ª—è (–≤ –ø–æ–¥—Ä–æ–∑–µ—Ç–Ω–∏–∫)", price: 350, unit: "—à—Ç" },
                { id: 2, name: "–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞–∫–ª–∞–¥–Ω–æ–π —Ä–æ–∑–µ—Ç–∫–∏ (–æ—Ç–∫—Ä—ã—Ç–∞—è)", price: 450, unit: "—à—Ç" },
                { id: 3, name: "–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –≤–∞—Ä–æ—á–Ω–æ–π –ø–∞–Ω–µ–ª–∏ (1—Ñ/3—Ñ)", price: 1200, unit: "—à—Ç" },
                { id: 4, name: "–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –¥—É—Ö. —à–∫–∞—Ñ–∞", price: 1000, unit: "—à—Ç" },
                { id: 5, name: "–£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–∏–ª–æ–≤–æ–π —Ä–æ–∑–µ—Ç–∫–∏ 380–í (3 —Ñ–∞–∑—ã)", price: 1500, unit: "—à—Ç" },
                { id: 6, name: "–ú–æ–Ω—Ç–∞–∂ —Ç–µ—Ä–º–æ—Ä–µ–≥—É–ª—è—Ç–æ—Ä–∞ —Ç–µ–ø–ª–æ–≥–æ –ø–æ–ª–∞", price: 600, unit: "—à—Ç" }
            ]
        },
        {
            id: "light", title: "–û—Å–≤–µ—â–µ–Ω–∏–µ & LED", icon: "fa-lightbulb",
            items: [
                { id: 10, name: "–ú–æ–Ω—Ç–∞–∂ –ª—é—Å—Ç—Ä—ã (–∫—Ä—é–∫/–ø–ª–∞–Ω–∫–∞)", price: 1500, unit: "—à—Ç" },
                { id: 11, name: "–°–≤–µ—Ç–∏–ª—å–Ω–∏–∫ '–ê—Ä–º—Å—Ç—Ä–æ–Ω–≥' / –û—Ñ–∏—Å–Ω—ã–π", price: 500, unit: "—à—Ç" },
                { id: 12, name: "–¢–æ—á–µ—á–Ω—ã–π —Å–≤–µ—Ç–∏–ª—å–Ω–∏–∫ (–≤—Ä–µ–∑–∫–∞+–ø–æ–¥–∫–ª.)", price: 450, unit: "—à—Ç" },
                { id: 13, name: "LED –ª–µ–Ω—Ç–∞ (–º–æ–Ω—Ç–∞–∂ –≤ –ø—Ä–æ—Ñ–∏–ª—å)", price: 450, unit: "–º" },
                { id: 14, name: "LED –ª–µ–Ω—Ç–∞ (–Ω–∞–∫–ª–µ–π–∫–∞)", price: 300, unit: "–º" },
                { id: 15, name: "–ú–æ–Ω—Ç–∞–∂ –±–ª–æ–∫–∞ –ø–∏—Ç–∞–Ω–∏—è / –¥—Ä–∞–π–≤–µ—Ä–∞", price: 800, unit: "—à—Ç" }
            ]
        },
        {
            id: "diag", title: "–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞", icon: "fa-bolt",
            items: [
                { id: 20, name: "–ü–æ–∏—Å–∫ –Ω–µ–∏—Å–ø—Ä–∞–≤–Ω–æ—Å—Ç–∏ (–º–∏–Ω. –≤—ã–µ–∑–¥)", price: 3000, unit: "—É—Å–ª." },
                { id: 21, name: "–†–µ–º–æ–Ω—Ç –æ–±—Ä—ã–≤–∞ –≤ —Å—Ç–µ–Ω–µ (–±–µ–∑ –æ—Ç–¥–µ–ª–∫–∏)", price: 1500, unit: "—Ç–æ—á–∫–∞" },
                { id: 22, name: "–ü–µ—Ä–µ–±–æ—Ä–∫–∞ —Ä–∞—Å–ø–∞–µ—á–Ω–æ–π –∫–æ—Ä–æ–±–∫–∏", price: 1200, unit: "—à—Ç" }
            ]
        },
        {
            id: "rough", title: "–ß–µ—Ä–Ω–æ–≤—ã–µ —Ä–∞–±–æ—Ç—ã", icon: "fa-hammer",
            items: [
                { id: 30, name: "–®—Ç—Ä–æ–±–ª–µ–Ω–∏–µ (–±–µ—Ç–æ–Ω)", price: 600, unit: "–º" },
                { id: 31, name: "–®—Ç—Ä–æ–±–ª–µ–Ω–∏–µ (–∫–∏—Ä–ø–∏—á/–±–ª–æ–∫)", price: 400, unit: "–º" },
                { id: 32, name: "–í–º–∞–∑–∫–∞ –ø–æ–¥—Ä–æ–∑–µ—Ç–Ω–∏–∫–∞", price: 350, unit: "—à—Ç" },
                { id: 33, name: "–ü—Ä–æ–∫–ª–∞–¥–∫–∞ –∫–∞–±–µ–ª—è (–≤ –≥–æ—Ñ—Ä–µ)", price: 150, unit: "–º" }
            ]
        },
        {
            id: "shield", title: "–©–∏—Ç –∏ –ê–≤—Ç–æ–º–∞—Ç–∏–∫–∞", icon: "fa-server",
            items: [
                { id: 40, name: "–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∞ 1–ü", price: 350, unit: "—à—Ç" },
                { id: 41, name: "–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –£–ó–û / –î–∏—Ñ.–∞–≤—Ç–æ–º–∞—Ç–∞", price: 600, unit: "—à—Ç" },
                { id: 42, name: "–ö—Ä–æ—Å—Å-–º–æ–¥—É–ª—å / –®–∏–Ω—ã", price: 800, unit: "—à—Ç" },
                { id: 43, name: "–ú–æ–Ω—Ç–∞–∂ —Å—á–µ—Ç—á–∏–∫–∞", price: 1500, unit: "—à—Ç" }
            ]
        }
    ];

    let cart = {};

    function init() {
        const tabsContainer = document.getElementById('category-tabs');
        const listContainer = document.getElementById('services-list');

        services.forEach((cat, index) => {
            // –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–æ–≤
            const tabBtn = document.createElement('button');
            tabBtn.className = `tab-btn ${index === 0 ? 'active' : ''}`;
            tabBtn.innerText = cat.title;
            tabBtn.onclick = () => {
                document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
                tabBtn.classList.add('active');
                // –°–∫—Ä–æ–ª–ª —Å —É—á–µ—Ç–æ–º –ª–∏–ø–∫–æ–≥–æ —Ö–µ–¥–µ—Ä–∞
                const el = document.getElementById(`group-${cat.id}`);
                const offset = 140; 
                const bodyRect = document.body.getBoundingClientRect().top;
                const elementRect = el.getBoundingClientRect().top;
                const elementPosition = elementRect - bodyRect;
                const offsetPosition = elementPosition - offset;
                window.scrollTo({ top: offsetPosition, behavior: "smooth" });
            };
            tabsContainer.appendChild(tabBtn);

            // –°–æ–∑–¥–∞–Ω–∏–µ –≥—Ä—É–ø–ø —É—Å–ª—É–≥
            const group = document.createElement('div');
            group.className = 'service-group';
            group.id = `group-${cat.id}`;
            group.innerHTML = `<div class="group-title">${cat.title}</div>`;
            
            cat.items.forEach(item => {
                const itemEl = document.createElement('div');
                itemEl.className = 'service-item';
                itemEl.innerHTML = `
                    <div class="item-info">
                        <h4>${item.name}</h4>
                        <span class="item-price">${item.price} ‚ÇΩ</span> <span class="item-unit">/ ${item.unit}</span>
                    </div>
                    <div id="controls-${item.id}">
                        ${renderControlsHTML(item.id)}
                    </div>
                `;
                group.appendChild(itemEl);
            });
            listContainer.appendChild(group);
        });
    }

    function renderControlsHTML(id) {
        const qty = cart[id] || 0;
        if (qty === 0) {
            return `<div class="controls"><div class="add-btn-text" onclick="updateCart(${id}, 1)">–î–æ–±–∞–≤–∏—Ç—å</div></div>`;
        } else {
            return `
                <div class="controls">
                    <button class="btn-qty" onclick="updateCart(${id}, -1)">‚àí</button>
                    <span class="qty-val">${qty}</span>
                    <button class="btn-qty" onclick="updateCart(${id}, 1)">+</button>
                </div>`;
        }
    }

    function updateCart(id, delta) {
        // –í–∏–±—Ä–∞—Ü–∏—è –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö (–ø—Ä–∏—è—Ç–Ω—ã–π –æ—Ç–∫–ª–∏–∫)
        if (navigator.vibrate) navigator.vibrate(15); 

        if (!cart[id]) cart[id] = 0;
        cart[id] += delta;
        if (cart[id] <= 0) delete cart[id];

        // –û–±–Ω–æ–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É –≤ —Å–ø–∏—Å–∫–µ
        const ctrlContainer = document.getElementById(`controls-${id}`);
        if(ctrlContainer) ctrlContainer.innerHTML = renderControlsHTML(id);

        renderCart();
    }

    function renderCart() {
        // –≠–ª–µ–º–µ–Ω—Ç—ã –ü–ö
        const listDesktop = document.getElementById('cart-list-desktop');
        const actionsDesktop = document.getElementById('cart-actions-desktop');
        const totalDesktop = document.getElementById('total-price-desktop');
        
        // –≠–ª–µ–º–µ–Ω—Ç—ã –ú–æ–±–∏–ª—å–Ω—ã–µ
        const mobileBar = document.getElementById('mobile-bar');
        const mobTotal = document.getElementById('mob-total-price');
        const listMobile = document.getElementById('cart-list-mobile');
        const modalTotal = document.getElementById('modal-total-price');

        let html = '';
        let total = 0;
        let hasItems = false;

        services.forEach(cat => {
            cat.items.forEach(item => {
                if (cart[item.id]) {
                    hasItems = true;
                    const sum = cart[item.id] * item.price;
                    total += sum;
                    html += `
                        <div class="cart-list-item">
                            <div>
                                <b>${item.name}</b><br>
                                <span style="color:#888">${cart[item.id]} ${item.unit} x ${item.price} ‚ÇΩ</span>
                            </div>
                            <div style="display:flex; align-items:center;">
                                <b>${sum} ‚ÇΩ</b>
                                <i class="fa-solid fa-trash del-btn" onclick="updateCart(${item.id}, -${cart[item.id]})"></i>
                            </div>
                        </div>`;
                }
            });
        });

        const totalStr = total.toLocaleString('ru-RU') + ' ‚ÇΩ';

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ü–ö –≤–µ—Ä—Å–∏–∏
        if (hasItems) {
            listDesktop.innerHTML = html;
            actionsDesktop.style.display = 'block';
            totalDesktop.innerText = totalStr;
        } else {
            listDesktop.innerHTML = '<div class="empty-msg">–°–º–µ—Ç–∞ –ø—É—Å—Ç–∞</div>';
            actionsDesktop.style.display = 'none';
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ú–æ–±–∏–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–∏
        if (hasItems) {
            mobileBar.style.display = 'flex'; // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –Ω–∏–∂–Ω—é—é –ø–ª–∞—à–∫—É
            mobTotal.innerText = totalStr;
            listMobile.innerHTML = html;
            modalTotal.innerText = totalStr;
        } else {
            mobileBar.style.display = 'none';
            closeModal();
        }
    }

    // === –§–£–ù–ö–¶–ò–ò –û–¢–ü–†–ê–í–ö–ò ===
    function sendOrder(type) {
        let comment = "";
        // –ë–µ—Ä–µ–º –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–æ–≥–æ, –≥–¥–µ –Ω–∞–∂–∞–ª–∏ (–ü–ö –∏–ª–∏ –ú–æ–±–∏–ª–∫–∞)
        if (window.innerWidth <= 900) {
            comment = document.getElementById('comment-mobile').value;
        } else {
            comment = document.getElementById('comment-desktop').value;
        }

        let msg = "–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! –ó–∞—è–≤–∫–∞ —Å —Å–∞–π—Ç–∞:\n\n";
        let total = 0;

        services.forEach(cat => {
            cat.items.forEach(item => {
                if (cart[item.id]) {
                    const sum = cart[item.id] * item.price;
                    total += sum;
                    msg += `üîπ ${item.name}: ${cart[item.id]} ${item.unit} (${sum}‚ÇΩ)\n`;
                }
            });
        });

        msg += `\nüí∞ –ò–¢–û–ì–û: ${total.toLocaleString()} —Ä—É–±.`;
        if (comment) msg += `\n\nüìù –ò–Ω—Ñ–æ: ${comment}`;

        // –í–ê–®–ò –ö–û–ù–¢–ê–ö–¢–´
        const phone = "79785754636"; 
        const tgUsername = "Llosta"; 

        let url = "";
        if (type === 'wa') url = `https://wa.me/${phone}?text=${encodeURIComponent(msg)}`;
        if (type === 'tg') url = `https://t.me/${tgUsername}?text=${encodeURIComponent(msg)}`;

        window.open(url, '_blank');
    }

    // === –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û ===
    function openModal() {
        document.getElementById('modal').classList.add('active');
        document.body.style.overflow = 'hidden'; // –ë–ª–æ–∫–∏—Ä—É–µ–º —Å–∫—Ä–æ–ª–ª —Ñ–æ–Ω–∞
    }
    function closeModal() {
        document.getElementById('modal').classList.remove('active');
        document.body.style.overflow = 'auto';
    }
    document.getElementById('modal').onclick = function(e) {
        if(e.target === this) closeModal();
    }

    // –ó–∞–ø—É—Å–∫
    init();
</script>

</body>
</html>
